$(function () {
    $("#notify-sms-form").dialog({
        autoOpen: false,
        modal: true,
        width: "500px",
        buttons: {
            "Уведомить": function () {
                const url = $(this).data("notify_url");
                const req = {
                    Phone: "+79166348536",
                    Text: "РОБОТ RNIP НЕ РАБОТАЕТ! (ДОБРОЖЕЛАТЕЛИ)"
                };
                var dlg = $(this);

                $.post(url, req)
                    .done(function (data) {
                        if (data !== "OK") {
                            window.alert(data);
                        }
                        dlg.dialog("close");
                    })
                    .fail(function (data) {
                        window.alert("Уведомить не удалось...");
                    });
            },
            "Сжалиться": function () {
                $(this).dialog("close");
            }
        },
        close: function () {
        }
    });
});

function open_sms_notifier(url) {
    $("#sms-notify-img").show();
    $("#notify-sms-form").data("notify_url", url).dialog("open");
}
